<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>글쓰기 - GradeAdvisor</title>
  <!-- Bootstrap CSS -->
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons CSS -->
  <link href="/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <!-- Your custom styles -->
  <!-- Bootstrap Bundle with Popper -->
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- Bootstrap Icons -->
  <link href="/css/mainForm/style.css" rel="stylesheet">
  <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script>
  <script type="text/javascript">


    $(document).ready(function () {

      $("#btnSend").on("click", function () {
        doSubmit();
      })
    })

    function calBytes(str) {
      let tcount = 0;
      let tmpStr = String(str);
      let strCnt = tmpStr.length;
      let onechar;
      for (let i = 0; i < strCnt; i++) {
        onechar = tmpStr.charAt(i);
        if (escape(onechar).length > 4) {
          tcount += 2;
        } else {
          tcount += 1;
        }
      }
      return tcount;
    }
    function doSubmit() {
      let f = document.getElementById("f"); // 폼 요소 가져오기

      if (!f) {
        alert("폼 요소를 찾을 수 없습니다.");
        return;
      }

      let titleInput = document.getElementById("title"); // 제목 입력 필드
      let contentTextarea = document.getElementById("contents"); // 내용 입력 필드

      if (!titleInput || !contentTextarea) {
        alert("입력 필드를 찾을 수 없습니다.");
        return;
      }

      if (titleInput.value === "") {
        alert("제목을 입력하시기 바랍니다.");
        titleInput.focus();
        return;
      }

      if (calBytes(titleInput.value) > 200) {
        alert("최대 200Bytes까지 입력 가능합니다.");
        titleInput.focus();
        return;
      }

      if (contentTextarea.value === "") {
        alert("내용을 입력하시기 바랍니다.");
        contentTextarea.focus();
        return;
      }

      $.ajax({
        url: "/bootStrap/boardInsert",
        type: "post",
        dataType: "JSON",
        data: $("#f").serialize(),
        success: function (json) {
          alert(json.msg);
          location.href = "/bootStrap/mainBoard?page=1";
        }
      });
    }
  </script>

</head>

<body>
<header id="header" class="header fixed-top">
  <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

    <a href="index.html" class="logo d-flex align-items-center">
      <img src="/images/img/logo.png" alt="">
      <span>GradeAdvisor</span>
    </a>

    <nav id="navbar" class="navbar">
      <ul>
        <li><a class="nav-link scrollto " href="#hero">Home</a></li>
        <li><a class="nav-link scrollto" href="#team">Team</a></li>
        <li><a class="active" href="/bootStrap/mainBoard?page=1">게시판</a></li>
        <li class="dropdown"><a href="#"><span>Drop Down</span> <i class="bi bi-chevron-down"></i></a>
          <ul>
            <li><a href="#">Drop Down 1</a></li>
            <li class="dropdown"><a href="#"><span>Deep Drop Down</span> <i class="bi bi-chevron-right"></i></a>
              <ul>
                <li><a href="#">Deep Drop Down 1</a></li>
                <li><a href="#">Deep Drop Down 2</a></li>
                <li><a href="#">Deep Drop Down 3</a></li>
                <li><a href="#">Deep Drop Down 4</a></li>
                <li><a href="#">Deep Drop Down 5</a></li>
              </ul>
            </li>
            <li><a href="#">Drop Down 2</a></li>
            <li><a href="#">Drop Down 3</a></li>
            <li><a href="#">Drop Down 4</a></li>
          </ul>
        </li>

        <li class="dropdown megamenu"><a href="#"><span>Mega Menu</span> <i class="bi bi-chevron-down"></i></a>
          <ul>
            <li>
              <a href="#">Column 1 link 1</a>
              <a href="#">Column 1 link 2</a>
              <a href="#">Column 1 link 3</a>
            </li>
            <li>
              <a href="#">Column 2 link 1</a>
              <a href="#">Column 2 link 2</a>
              <a href="#">Column 3 link 3</a>
            </li>
            <li>
              <a href="#">Column 3 link 1</a>
              <a href="#">Column 3 link 2</a>
              <a href="#">Column 3 link 3</a>
            </li>
            <li>
              <a href="#">Column 4 link 1</a>
              <a href="#">Column 4 link 2</a>
              <a href="#">Column 4 link 3</a>
            </li>
          </ul>
        </li>

        <li><a class="getstarted scrollto" href="#about">로그인</a></li>
      </ul>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav><!-- .navbar -->

  </div>
</header><!-- End Header -->

<main id="main">

  <!-- ======= Breadcrumbs ======= -->
  <section class="breadcrumbs">
    <div class="container">

      <ol>
        <li><a href="index.html">메인</a></li>
        <li><a href="/bootStrap/mainBoard">게시판</a></li>
        <li>글 작성</li>
      </ol>
      <h2>글 작성</h2>

    </div>
  </section><!-- End Breadcrumbs -->

  <!-- ======= Blog Single Section ======= -->


</main><!-- End #main -->

<main>
  <section id="footer" class="footer">
    <div class="container">
      <div class="section-title">
      </div>
      <div class="row">
        <div class="col-lg-12">
          <form action="/post" method="post" id="f" name="f">
            <div class="mb-3">
              <label for="title" class="form-label">제목</label>
              <input type="text" class="form-control" style="width: 25%" id="title" name="title" required>
            </div>
            <div class="mb-3">
              <label for="contents" class="form-label">내용</label>
              <textarea class="form-control" id="contents" name="contents" rows="5" required></textarea>
            </div>
            <button type="button" id="btnSend" class="btn btn-primary">등록</button>
          </form>
        </div>
      </div>
    </div>
  </section>


</main>

<script src="/js/mainForm/main.js"></script>

</body>

</html>
